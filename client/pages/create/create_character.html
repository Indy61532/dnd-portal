<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HeroVault - Create Character</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/create_character.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bahiana&family=Cinzel:wght@400;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="content">
        <div class="navbar main-header">
            <div class="nav-content">
                <a href="../../index.html">
                    <div class="nav-left">
                        <i class="fas logo fa-dragon"></i>
                        <span class="brand">HeroVault</span>
                    </div>
                </a>
                <div class="nav-center create-navbar">
                    <div class="cteate-title">Character Builder</div>
                </div>
                <div class="nav-right profile">
                    <div class="profileimg"></div>
                    <div class="profilename">Adventure Master</div>
                </div>
            </div>
        </div>

        <div class="main wizard-container">
            <!-- Stepper Header -->
            <div class="stepper-header">
                <ul class="wizard-steps">
                    <li class="wizard-step active" data-step="1">
                        <div class="step-indicator">1</div>
                        <span class="step-label">Race</span>
                    </li>
                    <li class="wizard-step" data-step="2">
                        <div class="step-indicator">2</div>
                        <span class="step-label">Class</span>
                    </li>
                    <li class="wizard-step" data-step="3">
                        <div class="step-indicator">3</div>
                        <span class="step-label">Background</span>
                    </li>
                    <li class="wizard-step" data-step="4">
                        <div class="step-indicator">4</div>
                        <span class="step-label">Abilities</span>
                    </li>
                    <li class="wizard-step" data-step="5">
                        <div class="step-indicator">5</div>
                        <span class="step-label">Equipment</span>
                    </li>
                    <li class="wizard-step" data-step="6">
                        <div class="step-indicator">6</div>
                        <span class="step-label">Review</span>
                    </li>
                </ul>
            </div>

            <div class="wizard-content-wrapper">
                <!-- Main Content Area -->
                <div class="wizard-main">
                    
                    <div class="wizard-scroll-area">
                    <!-- Step 1: Race -->
                    <section class="wizard-panel active" id="panel-race">
                        <div class="panel-header">
                            <h2>Choose Race</h2>
                            <p>Select your character's race to determine their fundamental traits.</p>
                        </div>
                        <div class="panel-content">
                            <!-- Placeholder for Race Selection -->
                            <div class="selection-grid">
                                <div class="selection-card">
                                    <div class="card-image-wrapper">
                                        <div class="card-image-placeholder"><i class="fas fa-user"></i></div>
                                    </div>
                                    <div class="card-content">
                                        <h3>Human</h3>
                                    </div>
                                </div>
                                <div class="selection-card">
                                    <div class="card-image-wrapper">
                                        <div class="card-image-placeholder"><i class="fas fa-leaf"></i></div>
                                    </div>
                                    <div class="card-content">
                                        <h3>Elf</h3>
                                    </div>
                                </div>
                                <div class="selection-card">
                                    <!-- Example without image wrapper -->
                                    <div class="card-content">
                                        <h3>Dwarf</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Step 2: Class -->
                    <section class="wizard-panel" id="panel-class">
                        <div class="panel-header">
                            <h2>Choose Class</h2>
                            <p>Select a class to define your character's vocation and special talents.</p>
                        </div>
                        <div class="panel-content">
                            <!-- Placeholder for Class Selection -->
                            <div class="selection-grid">
                                <div class="selection-card centered-card">
                                    <h3>Fighter</h3>
                                </div>
                                <div class="selection-card centered-card">
                                    <h3>Wizard</h3>
                                </div>
                                <div class="selection-card centered-card">
                                    <h3>Rogue</h3>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Step 3: Background -->
                    <section class="wizard-panel" id="panel-background">
                        <div class="panel-header">
                            <h2>Choose Background</h2>
                            <p>Select a background to define your character's history and upbringing.</p>
                        </div>
                        <div class="panel-content">
                            <!-- Placeholder for Background Selection -->
                            <div class="selection-grid">
                                <div class="selection-card centered-card">
                                    <h3>Acolyte</h3>
                                </div>
                                <div class="selection-card centered-card">
                                    <h3>Criminal</h3>
                                </div>
                                <div class="selection-card centered-card">
                                    <h3>Soldier</h3>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Step 4: Ability Scores -->
                    <section class="wizard-panel" id="panel-abilities">
                        <div class="panel-header">
                            <h2>Ability Scores</h2>
                            <p>Determine your character's physical and mental capabilities.</p>
                        </div>
                        <div class="panel-content">
                            
                            <!-- Mode Selector -->
                            <div class="abilities-top-bar">
                                <div class="generation-method">
                                    <label>Generation Method</label>
                                    <select id="ability-method-select" class="method-select">
                                        <option value="point-buy">Point Buy</option>
                                        <option value="standard-array">Standard Array</option>
                                        <option value="manual">Manual / Rolled</option>
                                    </select>
                                </div>
                                <div class="points-display" id="points-container">
                                    <span class="points-label">Points Remaining</span>
                                    <span class="points-value" id="points-remaining">27</span>
                                </div>
                            </div>

                            <!-- Quick Overview -->
                            <div class="abilities-quick-grid">
                                <div class="ability-quick-col">
                                    <div class="ability-name">STR</div>
                                    <div class="ability-base-input"><input type="number" value="8" class="base-score-input" data-ability="str"></div>
                                    <div class="ability-total-display">
                                        <div class="total-score">8</div>
                                        <div class="total-mod">(-1)</div>
                                    </div>
                                </div>
                                <div class="ability-quick-col">
                                    <div class="ability-name">DEX</div>
                                    <div class="ability-base-input"><input type="number" value="8" class="base-score-input" data-ability="dex"></div>
                                    <div class="ability-total-display">
                                        <div class="total-score">8</div>
                                        <div class="total-mod">(-1)</div>
                                    </div>
                                </div>
                                <div class="ability-quick-col">
                                    <div class="ability-name">CON</div>
                                    <div class="ability-base-input"><input type="number" value="8" class="base-score-input" data-ability="con"></div>
                                    <div class="ability-total-display">
                                        <div class="total-score">8</div>
                                        <div class="total-mod">(-1)</div>
                                    </div>
                                </div>
                                <div class="ability-quick-col">
                                    <div class="ability-name">INT</div>
                                    <div class="ability-base-input"><input type="number" value="8" class="base-score-input" data-ability="int"></div>
                                    <div class="ability-total-display">
                                        <div class="total-score">8</div>
                                        <div class="total-mod">(-1)</div>
                                    </div>
                                </div>
                                <div class="ability-quick-col">
                                    <div class="ability-name">WIS</div>
                                    <div class="ability-base-input"><input type="number" value="8" class="base-score-input" data-ability="wis"></div>
                                    <div class="ability-total-display">
                                        <div class="total-score">8</div>
                                        <div class="total-mod">(-1)</div>
                                    </div>
                                </div>
                                <div class="ability-quick-col">
                                    <div class="ability-name">CHA</div>
                                    <div class="ability-base-input"><input type="number" value="8" class="base-score-input" data-ability="cha"></div>
                                    <div class="ability-total-display">
                                        <div class="total-score">8</div>
                                        <div class="total-mod">(-1)</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Detailed Calculations -->
                            <h3 class="details-header">Score Calculations</h3>
                            <div class="abilities-details-grid">
                                <!-- STR Card -->
                                <div class="ability-detail-card">
                                    <div class="detail-header">
                                        <div class="detail-icon"><i class="fas fa-fist-raised"></i></div>
                                        <div class="detail-title">Strength</div>
                                        <div class="detail-final">
                                            <span class="final-score">8</span>
                                            <span class="final-mod">(-1)</span>
                                        </div>
                                    </div>
                                    <div class="detail-rows">
                                        <div class="detail-row"><span>Base Score</span> <span>8</span></div>
                                        <div class="detail-row"><span>Racial Bonus</span> <span>+0</span></div>
                                        <div class="detail-row"><span>Other Mod</span> <input type="number" class="mini-input" value="0"></div>
                                        <div class="detail-row override"><span>Override</span> <input type="number" class="mini-input override-input" placeholder="-"></div>
                                    </div>
                                </div>
                                <!-- DEX Card -->
                                <div class="ability-detail-card">
                                    <div class="detail-header">
                                        <div class="detail-icon"><i class="fas fa-running"></i></div>
                                        <div class="detail-title">Dexterity</div>
                                        <div class="detail-final">
                                            <span class="final-score">8</span>
                                            <span class="final-mod">(-1)</span>
                                        </div>
                                    </div>
                                    <div class="detail-rows">
                                        <div class="detail-row"><span>Base Score</span> <span>8</span></div>
                                        <div class="detail-row"><span>Racial Bonus</span> <span>+0</span></div>
                                        <div class="detail-row"><span>Other Mod</span> <input type="number" class="mini-input" value="0"></div>
                                        <div class="detail-row override"><span>Override</span> <input type="number" class="mini-input override-input" placeholder="-"></div>
                                    </div>
                                </div>
                                <!-- CON Card -->
                                <div class="ability-detail-card">
                                    <div class="detail-header">
                                        <div class="detail-icon"><i class="fas fa-heartbeat"></i></div>
                                        <div class="detail-title">Constitution</div>
                                        <div class="detail-final">
                                            <span class="final-score">8</span>
                                            <span class="final-mod">(-1)</span>
                                        </div>
                                    </div>
                                    <div class="detail-rows">
                                        <div class="detail-row"><span>Base Score</span> <span>8</span></div>
                                        <div class="detail-row"><span>Racial Bonus</span> <span>+0</span></div>
                                        <div class="detail-row"><span>Other Mod</span> <input type="number" class="mini-input" value="0"></div>
                                        <div class="detail-row override"><span>Override</span> <input type="number" class="mini-input override-input" placeholder="-"></div>
                                    </div>
                                </div>
                                <!-- INT Card -->
                                <div class="ability-detail-card">
                                    <div class="detail-header">
                                        <div class="detail-icon"><i class="fas fa-brain"></i></div>
                                        <div class="detail-title">Intelligence</div>
                                        <div class="detail-final">
                                            <span class="final-score">8</span>
                                            <span class="final-mod">(-1)</span>
                                        </div>
                                    </div>
                                    <div class="detail-rows">
                                        <div class="detail-row"><span>Base Score</span> <span>8</span></div>
                                        <div class="detail-row"><span>Racial Bonus</span> <span>+0</span></div>
                                        <div class="detail-row"><span>Other Mod</span> <input type="number" class="mini-input" value="0"></div>
                                        <div class="detail-row override"><span>Override</span> <input type="number" class="mini-input override-input" placeholder="-"></div>
                                    </div>
                                </div>
                                <!-- WIS Card -->
                                <div class="ability-detail-card">
                                    <div class="detail-header">
                                        <div class="detail-icon"><i class="fas fa-eye"></i></div>
                                        <div class="detail-title">Wisdom</div>
                                        <div class="detail-final">
                                            <span class="final-score">8</span>
                                            <span class="final-mod">(-1)</span>
                                        </div>
                                    </div>
                                    <div class="detail-rows">
                                        <div class="detail-row"><span>Base Score</span> <span>8</span></div>
                                        <div class="detail-row"><span>Racial Bonus</span> <span>+0</span></div>
                                        <div class="detail-row"><span>Other Mod</span> <input type="number" class="mini-input" value="0"></div>
                                        <div class="detail-row override"><span>Override</span> <input type="number" class="mini-input override-input" placeholder="-"></div>
                                    </div>
                                </div>
                                <!-- CHA Card -->
                                <div class="ability-detail-card">
                                    <div class="detail-header">
                                        <div class="detail-icon"><i class="fas fa-comments"></i></div>
                                        <div class="detail-title">Charisma</div>
                                        <div class="detail-final">
                                            <span class="final-score">8</span>
                                            <span class="final-mod">(-1)</span>
                                        </div>
                                    </div>
                                    <div class="detail-rows">
                                        <div class="detail-row"><span>Base Score</span> <span>8</span></div>
                                        <div class="detail-row"><span>Racial Bonus</span> <span>+0</span></div>
                                        <div class="detail-row"><span>Other Mod</span> <input type="number" class="mini-input" value="0"></div>
                                        <div class="detail-row override"><span>Override</span> <input type="number" class="mini-input override-input" placeholder="-"></div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </section>

                    <!-- Step 5: Equipment -->
                    <section class="wizard-panel" id="panel-equipment">
                        <div class="panel-header">
                            <h2>Equipment</h2>
                            <p>Choose your starting equipment and weapons.</p>
                        </div>
                        <div class="panel-content">
                            <div class="equipment-layout">
                                <!-- Left Column: Current Inventory -->
                                <div class="current-inventory-section">
                                    <h3>Current Inventory</h3>
                                    <div class="inventory-list" id="inventory-list">
                                        <!-- Placeholder items will go here -->
                                        <div class="empty-state">No items equipped</div>
                                    </div>
                                    <div class="inventory-footer">
                                        Total Weight: <span id="total-weight">0</span> lb.
                                    </div>
                                </div>

                                <!-- Right Column: Add Items -->
                                <div class="add-items-section">
                                    <h3>Add Items</h3>
                                    
                                    <div class="items-controls">
                                        <div class="search-wrapper">
                                            <i class="fas fa-search search-icon"></i>
                                            <input type="text" placeholder="Search equipment..." class="item-search-input">
                                        </div>
                                        
                                        <div class="filter-buttons">
                                            <button class="filter-btn active" data-filter="all">All</button>
                                            <button class="filter-btn" data-filter="armor"><i class="fas fa-shield-alt"></i> Armor</button>
                                            <button class="filter-btn" data-filter="weapon"><i class="fas fa-sword"></i> Weapon</button>
                                            <button class="filter-btn" data-filter="potion"><i class="fas fa-flask"></i> Potion</button>
                                            <button class="filter-btn" data-filter="scroll"><i class="fas fa-scroll"></i> Scroll</button>
                                            <button class="filter-btn" data-filter="tool"><i class="fas fa-tools"></i> Tool</button>
                                        </div>
                                    </div>

                                    <div class="items-results-list">
                                        <!-- Results will appear here -->
                                        <div class="item-result-placeholder">
                                            Search for items to add to your inventory
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Step 6: Review -->
                    <section class="wizard-panel" id="panel-review">
                        <div class="panel-header">
                            <h2>Review Character</h2>
                            <p>Finalize your character details before creation.</p>
                        </div>
                        <div class="panel-content">
                            <div class="review-grid">
                                <!-- Character Info -->
                                <div class="review-section info-section">
                                    <h3>Character Details</h3>
                                    <div class="form-group">
                                        <label for="char-name">Character Name</label>
                                        <input type="text" id="char-name" placeholder="Enter character name">
                                    </div>
                                    <div class="form-group">
                                        <label for="char-desc">Description & Backstory</label>
                                        <textarea id="char-desc" rows="6" placeholder="Describe your character's appearance and history..."></textarea>
                                    </div>
                                </div>

                                <!-- Physical Details -->
                                <div class="review-section physical-section">
                                    <h3>Physical Characteristics</h3>
                                    <div class="physical-grid">
                                        <div class="form-group">
                                            <label for="char-age">Age</label>
                                            <input type="number" id="char-age" placeholder="e.g. 25">
                                        </div>
                                        <div class="form-group">
                                            <label for="char-height">Height</label>
                                            <input type="text" id="char-height" placeholder="e.g. 5'10&quot;">
                                        </div>
                                        <div class="form-group">
                                            <label for="char-weight">Weight</label>
                                            <input type="text" id="char-weight" placeholder="e.g. 180 lb">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="wizard-navigation">
                        <button class="nav-btn prev-btn" disabled>Previous</button>
                        <button class="nav-btn next-btn">Next Step</button>
                    </div>
                </div>

                <!-- Sidebar Summary -->
                <aside class="character-summary">
                    <div class="summary-header">
                        <h3>Character Sheet</h3>
                    </div>
                    <div class="summary-content">
                        <div class="character-image-preview">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <div class="summary-item">
                            <span class="label">Name:</span>
                            <span class="value" id="summary-name">-</span>
                        </div>
                        
                        <div class="summary-item">
                            <span class="label">Race:</span>
                            <span class="value" id="summary-race">-</span>
                        </div>
                        <div class="summary-item">
                            <span class="label">Class:</span>
                            <span class="value" id="summary-class">-</span>
                        </div>
                        <div class="summary-item">
                            <span class="label">Level:</span>
                            <span class="value">1</span>
                        </div>
                        <div class="summary-stats">
                            <div class="mini-stat">
                                <div class="stat-label">STR</div>
                                <div class="stat-val">10</div>
                            </div>
                            <div class="mini-stat">
                                <div class="stat-label">DEX</div>
                                <div class="stat-val">10</div>
                            </div>
                            <div class="mini-stat">
                                <div class="stat-label">CON</div>
                                <div class="stat-val">10</div>
                            </div>
                            <div class="mini-stat">
                                <div class="stat-label">INT</div>
                                <div class="stat-val">10</div>
                            </div>
                            <div class="mini-stat">
                                <div class="stat-label">WIS</div>
                                <div class="stat-val">10</div>
                            </div>
                            <div class="mini-stat">
                                <div class="stat-label">CHA</div>
                                <div class="stat-val">10</div>
                            </div>
                        </div>
                    </div>
                </aside>
            </div>
        </div>
    </div>

    <script type="module" src="../../js/supabase-client.js"></script>
    <script type="module" src="../../js/auth-ui.js"></script>
    
    <!-- Inline script for basic stepper functionality (placeholder for future character-wizard.js) -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const steps = document.querySelectorAll('.wizard-step');
            const panels = document.querySelectorAll('.wizard-panel');
            const prevBtn = document.querySelector('.prev-btn');
            const nextBtn = document.querySelector('.next-btn');
            let currentStep = 0;

            function updateWizard() {
                // Update Stepper
                steps.forEach((step, index) => {
                    if (index === currentStep) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                    } else if (index < currentStep) {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    } else {
                        step.classList.remove('active', 'completed');
                    }
                });

                // Update Panels
                panels.forEach((panel, index) => {
                    if (index === currentStep) {
                        panel.classList.add('active');
                    } else {
                        panel.classList.remove('active');
                    }
                });

                // Update Buttons
                prevBtn.disabled = currentStep === 0;
                if (currentStep === steps.length - 1) {
                    nextBtn.textContent = 'Create Character';
                } else {
                    nextBtn.textContent = 'Next Step';
                }
            }

            nextBtn.addEventListener('click', () => {
                if (currentStep < steps.length - 1) {
                    currentStep++;
                    updateWizard();
                } else {
                    // Submit logic here
                    alert('Character Creation logic to be implemented!');
                }
            });

            prevBtn.addEventListener('click', () => {
                if (currentStep > 0) {
                    currentStep--;
                    updateWizard();
                }
            });
            
            // Allow clicking on steps to navigate
            steps.forEach((step, index) => {
                step.addEventListener('click', () => {
                    // Only allow navigating to completed steps or the immediate next one
                    // For now, allow navigation for testing
                    currentStep = index;
                    updateWizard();
                });
            });
        });
    </script>
</body>
</html>
